!function(){function B(){a=document.body,b=window.innerWidth,c=window.innerHeight,d=document.getElementById("container"),d.addEventListener("dblclick",L),d.addEventListener("touchstart",M),C("canvas-wrapper"),E(0,200,0),G(),H(),D(),J(),K(),F()}function C(){if(f=new THREE.Scene,f.fog=new THREE.Fog(2245700,1,200),e=new THREE.WebGLRenderer,e.setClearColor(2245700),e.setSize(b,c),1==arguments.length){var d=document.getElementById(arguments[0]);d.appendChild(e.domElement)}else 0==arguments.length&&a.appendChild(e.domElement)}function D(){u=new THREE.ShaderPass(THREE.VignetteShader),u.uniforms.darkness.value=1.2,film=new THREE.ShaderPass(THREE.FilmShader),film.uniforms.sCount.value=2.5,film.uniforms.sIntensity.value=1.5,film.uniforms.nIntensity.value=1.5,film.uniforms.grayscale.value=!1,w=new THREE.ShaderPass(THREE.CopyShader),w.renderToScreen=!0,g=new THREE.EffectComposer(e),g.addPass(new THREE.RenderPass(f,h)),g.addPass(u),g.addPass(film),g.addPass(w)}function E(a,d,e){h=new THREE.PerspectiveCamera(80,b/c,.1,1e3),h.position.set(a,d,e),h.lookAt({x:0,y:0,z:0}),h.rotation.y=1.5*Math.PI,h.rotation.z=1.5*Math.PI}function F(){var a=function(){var a=navigator.userAgent;return a.indexOf("iPhone")>0||a.indexOf("iPod")>0||a.indexOf("Android")>0&&a.indexOf("Mobile")>0?"mobile":void 0}();"mobile"==a&&(x=new THREE.DeviceOrientationControls(h),I())}function G(a,b,c){var d=new THREE.TextureLoader,e=d.load("http://jsrun.it/assets/E/c/z/W/EczWq.png");j=new THREE.Object3D,l=new THREE.SpriteMaterial({map:e,color:16777215,opacity:.8,transparent:!0,blending:THREE.AdditiveBlending});for(var g=0;g<500;g++)k=new THREE.Sprite(l),k.position.set(1e3*Math.random()-500,1e3*Math.random()-500,1e3*Math.random()-500),k.scale.x=k.scale.y=k.scale.z=10*Math.random(),j.add(k),f.add(j)}function H(){m=5,n=new THREE.Object3D,o=new THREE.IcosahedronGeometry(1),p=new THREE.MeshBasicMaterial({color:16777215,fog:!0});for(var a=0;a<m;a++)q=new THREE.Mesh(o,p),q.position.set(0,0,0),n.add(q),f.add(n);r=new THREE.TorusGeometry(200,20,30,120,2*Math.PI),s=new THREE.MeshBasicMaterial({color:65433,opacity:.5,transparent:!0,wireframe:!0,fog:!0}),t=new THREE.Mesh(r,s),t.rotation.z=1.5*Math.PI,f.add(t)}function I(){window.cancelAnimationFrame(J),window.requestAnimationFrame(I),x.connect(),x.update()}function J(){window.requestAnimationFrame(J),h.rotation.z+=.005}function K(){window.requestAnimationFrame(K),y-=.5,z=y*Math.PI/180;for(var a=0;a<m;a++)z=a+y*Math.PI/180,n.children[a].position.set(200*Math.cos(z),200*Math.sin(z),0),n.children[a].rotation.x+=.1,n.children[a].rotation.y+=.1;t.rotation.z+=.01,j.rotation.z+=.01,g.render()}function L(){a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.requestFullScreen()}function M(b){A?(a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.requestFullScreen(),A=!1):(A=!0,setTimeout(function(){A=!1},350))}function N(){b=window.innerWidth,c=window.innerHeight,h.aspect=b/c,h.updateProjectionMatrix(),e.setSize(b,c),g.setSize(b,c)}var a,b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,w,x,y=0,z=0,A=!1;window.addEventListener("load",B),window.addEventListener("resize",N)}();